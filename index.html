<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="HTML5 Testseite" />
    <meta name="author" content="Timo" />
    <title>HTML5 Offline</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- <script src="js/scripts.js"></script> -->
  </head>
  <body>
    <h3>Hello World</h3>
    <div id="status-message" class="offline-message"></div>
    <p id="greeting">Nice to meet you!</p>
    <p class="text">This is a text!</p>
    <p class="text2">This is for Rainer!</p>
  </body>
  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
            .then(function(registration) {
                console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch(function(error) {
                console.error('Service Worker registration failed:', error);
            });

        // Add an event listener to detect the online/offline status
        window.addEventListener('online', updateStatus);
        window.addEventListener('offline', updateStatus);

        // Initial status update
        updateStatus();
    }

    function updateStatus() {
      const statusMessage = document.getElementById('status-message');
      if (navigator.onLine) {
          statusMessage.textContent = 'Online';
          statusMessage.style.color = 'green';

          // Send a message to the Service Worker to update the cache
          navigator.serviceWorker.controller.postMessage('online');
      } else {
          statusMessage.textContent = 'Offline';
          statusMessage.style.color = 'red';
      }
    }
  </script>
</html>